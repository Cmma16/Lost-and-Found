import{_ as X,u as Y,g as Z,r as k,o as $,s as P,h as ee,T as C,B as U,a as te,A as se,K as oe,b as q,c as re,d as u,e as h,f as e,t as a,i as T,w as L,j as I,v as z,n as y,F as D,k as R,l as p,m as w,p as O,Q as ne,q as E,x as le}from"./index-0729dbfe.js";import{g as F}from"./index.esm2017-654ca940.js";import{i as ae,a as ie,b as de,c as ce,d as ue,e as he,f as ge,g as me,h as fe,j as be,k as pe}from"./index-43a7aeec.js";const xe={setup(){return{store:Y()}},data(){const d=Z();F();const s=k([]),g=k("");let b=[],t="allTab";const c=k({}),x=k({}),r=k({}),A="./img/download.png",_="./img/foundIt icon.png",M="./img/profile.jpg";$(async()=>{F();const o=P(C(w,"reports"),ee("created_at","desc")),i=await U(o);for(const l of i.docs){const m={post_id:l.id,category:l.data().category,header:l.data().header,location:l.data().location,date:l.data().date,time:l.data().time,more_info:l.data().more_info,user:l.data().user,created_at:l.data().created_at,imageURL:l.data().imageURL,isOpen:!1,showFullDescription:!1};b.push(m)}s.value=b,this.displayAll(),te(d,l=>{l&&j(l.uid)}),ae(),ie(),de(),ce(),ue(),he(),ge(),me(),fe(),be(),pe()});function V(){console.log(g.value),s.value=b,s.value=s.value.filter(o=>o.header.toLowerCase().includes(g.value.toLowerCase())||o.location.toLowerCase().includes(g.value.toLowerCase())||o.date.toLowerCase().includes(g.value.toLowerCase())||o.time.toLowerCase().includes(g.value.toLowerCase())||o.more_info.toLowerCase().includes(g.value.toLowerCase())||o.user.toLowerCase().includes(g.value.toLowerCase()))}function B(){s.value=b,s.value=s.value.filter(o=>o.category.includes("Lost"))}function N(){s.value=b,s.value=s.value.filter(o=>o.category.includes("Found"))}function K(){s.value=b,s.value=s.value.filter(o=>o.category.includes("Resolved"))}function Q(){const o="Resolved";s.value=b,s.value=s.value.filter(i=>i.category!==o)}async function S(o){var i={};const l=P(C(w,"users"),O("username","==",o));return(await U(l)).forEach(n=>{i={username:n.data().username,email:n.data().email}}),i}async function G(o,i){const l=await S(o.user);ne(C(w,"conversations"),{chat_Topic:o.header,created_At:E.now(),participants:[l.email,i.email],updated_At:E.now()}).then(m=>{const n=m.id;q.push({path:"/conversations/"+n})})}function H(o){const i={year:"numeric",month:"long",day:"numeric"},l=o.toDate().toLocaleString("en-US",i);var n=new Date-o.toDate();n=n/1e3;var f=" second(s) ago",v=Math.floor(n);return n>60&&n<3600?(v=Math.floor(n/60),Math.floor(n/60)>1?f=" mins ago":f=" min ago"):n>3600&&n<86400?(v=Math.floor(n/3600),Math.floor(n/3600)>1?f=" hrs ago":f=" hr ago"):n>86400&&n<604800?(v=Math.floor(n/86400),Math.floor(n/86400)>1?f=" days ago":f=" day ago"):n>604800?(v=l,f=""):(v=Math.floor(n),f="s ago"),v+f}async function j(o){const i=P(C(w,"users"),O("uid","==",o));(await U(i)).forEach(m=>{const n={username:m.data().username,email:m.data().email};r.value=n})}async function J(o){const i=P(C(w,"users"),O("username","==",o));(await U(i)).forEach(m=>{const n={username:m.data().username,email:m.data().email};c.value=n})}async function W(o){const i={id:o.post_id,category:o.category,header:o.header,location:o.location,date:o.date,time:o.time,more_info:o.more_info,user:o.user,created_at:o.created_at,imageURL:o.imageURL,isOpen:!1};x.value=i}return{reports:s,search:g,author:c,thisPost:x,currentUser:r,defaultImgPath:A,logoPath:_,defaultProfilePic:M,regex:/[\n\r]/,postID:null,showModal:!1,showFullDescription:!1,maxDescriptionLength:30,getUserInfo:J,getUser:S,getCurrentUser:j,getPostDetail:W,searchReports:V,lostOnly:B,messageThisUser:G,foundOnly:N,resolvedOnly:K,calculateTimeElapsed:H,displayAll:Q,activeTab:t,items:[{label:"Resolve",icon:"check_box",action:async o=>{s.value=s.value.filter(l=>l.post_id!==o);const i=se(w,"reports",o);await oe(i,{category:"Resolved"})}},{label:"Modify",icon:"edit",action:o=>{this.store.dispatch("updateData",o),q.push({name:"postEdit"})}}]}},computed:{},components:{},methods:{togglePostDropdown(d){const s=this.thisPost.isOpen;this.thisPost.isOpen=!s},toggleDropdown(d){const s=this.reports.indexOf(d),g=this.reports[s].isOpen;this.reports[s].isOpen=!g},toggleUserInfo(d){const s=d.user,g=this.showModal;this.showModal=!g,this.getUserInfo(s)},executeAction(d,s){this.isOpen=!1,d(s)},isCurrentUser(d){return d===this.currentUser.username},displayPostDetails(d){const s=this.showFullDescription;this.showFullDescription=!s,this.getPostDetail(d)}}},_e={class:"fixed top-0 z-50 py-2 w-full bg-[#003300] border-b border-gray-200 dark:bg-[#003300] dark:border-gray-700"},ve={class:"px-3 py-1 lg:px-5 lg:pl-3"},ye={class:"flex items-center justify-between"},we={class:"flex items-center justify-start"},ke=e("button",{"data-drawer-target":"logo-sidebar","data-drawer-toggle":"logo-sidebar","aria-controls":"logo-sidebar",type:"button",class:"material-symbols-outlined inline-flex items-center p-2 text-white rounded-lg sm:hidden hover:bg-white hover:text-[#003300] focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"}," menu ",-1),Ce={href:"#",class:"flex ml-2 md:mr-24"},Pe=["src"],Ue=e("span",{class:"self-center text-xl text-white font-semibold sm:text-2xl whitespace-nowrap dark:text-white"},"FoundIt!",-1),Te={class:"flex items-center"},Le={class:"flex items-center ml-3"},De={type:"button",class:"flex text-sm rounded-full","aria-expanded":"false","data-dropdown-toggle":"dropdown-user"},Ae=e("span",{class:"sr-only"},"Open user menu",-1),Re=["src"],Oe={class:"text-center hidden md:block text-white px-2 text-xl"},Me={class:"z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded shadow dark:bg-gray-700 dark:divide-gray-600",id:"dropdown-user"},Se={class:"px-4 py-3",role:"none"},je={class:"text-sm text-gray-900 md:hidden dark:text-white",role:"none"},qe={class:"text-sm font-medium text-gray-900 truncate dark:text-gray-300",role:"none"},Ie={class:"py-1",role:"none"},ze=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white",role:"menuitem"}," Profiles ",-1),Ee=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white",role:"menuitem"}," Messages ",-1),Fe={id:"logo-sidebar",class:"fixed top-0 left-0 z-40 w-64 h-screen pt-20 transition-transform -translate-x-full bg-white border-r border-gray-200 sm:translate-x-0 dark:bg-gray-800 dark:border-gray-700","aria-label":"Sidebar"},Ve={class:"h-full px-3 pb-4 overflow-y-auto bg-white dark:bg-gray-800"},Be={class:"flex mx-4 mb-4 pl-2 flex-row bg-green-400 rounded-lg"},Ne={class:"space-y-2 font-medium"},Ke=e("span",{class:"material-symbols-outlined font-bold"}," apps ",-1),Qe=e("span",{class:"ml-3"},"All Posts",-1),Ge=[Ke,Qe],He=e("span",{class:"material-symbols-outlined font-bold"}," conditions ",-1),Je=e("span",{class:"flex-1 ml-3 whitespace-nowrap"},"Lost Category",-1),We=[He,Je],Xe=e("span",{class:"material-symbols-outlined font-bold"}," search_check ",-1),Ye=e("span",{class:"flex-1 ml-3 whitespace-nowrap"},"Found Category",-1),Ze=[Xe,Ye],$e=e("span",{class:"material-symbols-outlined font-bold"}," check_box ",-1),et=e("span",{class:"flex-1 ml-3 whitespace-nowrap"},"Resolved",-1),tt=[$e,et],st=e("span",{class:"material-symbols-outlined"},"chat",-1),ot=e("span",{class:"flex-1 ml-3 whitespace-nowrap"},"Messages",-1),rt=e("span",{class:"inline-flex items-center justify-center w-3 h-3 p-3 ml-3 text-sm font-medium text-blue-800 bg-blue-100 rounded-full dark:bg-blue-900 dark:text-blue-300"},"3",-1),nt=e("button",{class:"rounded-full bg-[#00A651] h-10 m-3 active:scale-[0.9]"}," Create New Report ",-1),lt={class:"body p-4 sm:ml-64 bg-gray-100"},at={class:"p-4 mt-7 rounded-lg"},it={class:"grid-container"},dt={class:"flex justify-between px-4 pt-4"},ct={class:"font-bold text-lg"},ut=["onClick"],ht={class:"material-symbols-outlined active:rotate-90 transition-all"},gt={key:1,class:"flex bg-gray-300 flex-col top-[1.8rem] rounded-lg absolute"},mt=["onClick"],ft={class:"material-symbols-outlined mr-2"},bt=["onClick"],pt=["src"],xt={class:"flex flex-col p-4 w-full md:w-2/3 leading-normal"},_t={class:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"},vt={class:"flex flex-col justify-between mt-2"},yt={class:"flex"},wt={class:"text-gray-600 text-sm font-normal"},kt={key:0,class:"fixed top-0 left-0 right-0 bottom-0 bg-white flex justify-center items-center z-50"},Ct=e("div",{class:"loader"},"Loading reports",-1),Pt=[Ct],Ut={key:1,class:"fixed top-0 left-0 right-0 bottom-0 z-50"},Tt={class:"flex flex-col items-center bg-white border border-gray-200 rounded-lg shadow md:flex-row h-[100vh] w-full dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700"},Lt=["src"],Dt={class:"flex flex-col justify-between p-4 md:w-2/5 leading-normal"},At={class:"flex justify-between"},Rt={class:"flex flex-row"},Ot=["src"],Mt={class:"px-2 flex flex-col"},St={key:0,class:"fixed top-0 left-0 right-0 bottom-0 z-60"},jt={class:"bg-green-400 p-6 rounded max-w-sm mx-auto mt-16 flex flex-col"},qt={class:"flex flex-col"},It=e("span",{class:"font-normal text-base mt-2"},"Username",-1),zt={class:"font-medium pr-1 pb-1 text-base w-50 bg-transparent pointer-events-none"},Et=e("span",{class:"font-normal text-base mt-2"},"Email Address",-1),Ft={class:"text-gray-600 text-xs font-bold"},Vt={class:"font-semibold text-base"},Bt={class:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"},Nt={class:"border-2 border-green-600 w-200 py-1 rounded mt-2"},Kt=e("h1",{class:"font-bold m-2"},"Additional information:",-1),Qt={class:"m-2"},Gt={class:"flex justify-center my-4"},Ht={class:"inline-flex rounded-md shadow-sm",role:"group"},Jt={key:2,class:"flex bg-gray-300 flex-col rounded-lg absolute"},Wt=["onClick"];function Xt(d,s,g,b,t,c){const x=re("RouterLink");return u(),h(D,null,[e("nav",_e,[e("div",ve,[e("div",ye,[e("div",we,[ke,e("a",Ce,[e("img",{src:t.logoPath,class:"h-8 mr-3",alt:"FoundIt! Logo"},null,8,Pe),Ue])]),e("div",Te,[e("div",Le,[e("div",null,[e("button",De,[Ae,e("img",{class:"w-8 h-8 rounded-full",src:t.defaultProfilePic,alt:"user photo"},null,8,Re),e("span",Oe,a(t.currentUser.username),1)])]),e("div",Me,[e("div",Se,[e("p",je,a(t.currentUser.username),1),e("p",qe,a(t.currentUser.email),1)]),e("ul",Ie,[e("li",null,[T(x,{to:{path:"/profile"}},{default:L(()=>[ze]),_:1})]),e("li",null,[T(x,{to:{name:"conversations"}},{default:L(()=>[Ee]),_:1})]),e("li",null,[e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white",role:"menuitem",onClick:s[0]||(s[0]=r=>d.$store.dispatch("logout"))},"Sign out")])])])])])])])]),e("aside",Fe,[e("div",Ve,[e("div",Be,[I(e("input",{class:"block w-full p-2 text-sm text-gray-900 rounded-full border-0 bg-transparent placeholder:text-white focus:ring-0 focus:outline-none",type:"text",id:"search-navbar","onUpdate:modelValue":s[1]||(s[1]=r=>t.search=r),placeholder:"Search..."},null,512),[[z,t.search]]),e("button",{class:"material-symbols-outlined rounded-lg px-2 hover:bg-green-600",onClick:s[2]||(s[2]=(...r)=>t.searchReports&&t.searchReports(...r))}," Search ")]),e("ul",Ne,[e("li",null,[e("a",{href:"#",class:y(["flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-green-400 dark:hover:bg-gray-700",{"bg-green-500":t.activeTab==="allTab"}]),onClick:s[3]||(s[3]=r=>{t.displayAll(),t.activeTab="allTab"})},Ge,2)]),e("li",null,[e("a",{href:"#",class:y(["flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-green-400 dark:hover:bg-gray-700",{"bg-green-500":t.activeTab==="lostTab"}]),onClick:s[4]||(s[4]=r=>{t.lostOnly(),t.activeTab="lostTab"})},We,2)]),e("li",null,[e("a",{href:"#",class:y(["flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-green-400 dark:hover:bg-gray-700",{"bg-green-500":t.activeTab==="foundTab"}]),onClick:s[5]||(s[5]=r=>{t.foundOnly(),t.activeTab="foundTab"})},Ze,2)]),e("li",null,[e("a",{href:"#",class:y(["flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-green-400 dark:hover:bg-gray-700",{"bg-green-500":t.activeTab==="resolvedTab"}]),onClick:s[6]||(s[6]=r=>{t.resolvedOnly(),t.activeTab="resolvedTab"})},tt,2)]),e("li",null,[T(x,{to:{name:"conversations"},class:"flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"},{default:L(()=>[st,ot,rt]),_:1})]),e("li",null,[T(x,{to:"/create-report",class:"flex flex-col"},{default:L(()=>[nt]),_:1})])])])]),e("div",lt,[e("div",at,[e("div",it,[(u(!0),h(D,null,R(t.reports,(r,A)=>(u(),h("div",{key:r.post_id,class:"bg-white border w-auto min-w-[444px] max-w-lg border-gray-200 rounded-lg dark:bg-gray-800 dark:border-gray-700"},[e("div",dt,[e("p",ct,a(r.category),1),e("div",{class:y(["flex rounded-full hover:bg-[#4DEC9A] justify-center relative",{"border-[1px]":c.isCurrentUser(r.user)}])},[c.isCurrentUser(r.user)?(u(),h("button",{key:0,class:y(["rounded-full px-[1.5px] flex justify-items-center hover:bg-green-500 transition-all duration-500 ease-in-out",{"bg-green-500":r.isOpen}]),onClick:_=>c.toggleDropdown(r)},[e("span",ht,a(r.isOpen?"close":"more_horiz"),1)],10,ut)):p("",!0),r.isOpen?(u(),h("div",gt,[(u(!0),h(D,null,R(t.items,_=>(u(),h("button",{onClick:M=>c.executeAction(_.action,r.post_id),class:"mx-1 flex flex-row py-1 hover:bg-green-500 font-medium pr-2 rounded-lg"},[e("span",ft,a(_.icon),1),le(" "+a(_.label),1)],8,mt))),256))])):p("",!0)],2)]),e("div",{onClick:_=>c.displayPostDetails(r),class:"flex flex-col items-center bg-white border-gray-200 rounded-lg md:flex-row md:max-w-xl"},[e("img",{class:"object-scale-down w-full rounded-t-lg h-96 md:h-auto md:w-48 md:rounded-none md:rounded-l-lg",src:r.imageURL?r.imageURL:t.defaultImgPath},null,8,pt),e("div",xt,[e("h5",_t,a(r.header),1),e("p",null,"Location: "+a(r.location),1),e("p",null,"Date: "+a(r.date),1),e("p",null,"Time: "+a(r.time),1),e("div",vt,[e("div",yt,[e("span",null,a(r.user),1)]),e("p",wt,a(t.calculateTimeElapsed(r.created_at)),1)])])],8,bt)]))),128))])]),t.currentUser.email==null?(u(),h("div",kt,Pt)):p("",!0),t.showFullDescription?(u(),h("div",Ut,[e("div",Tt,[e("img",{class:"object-scale-down w-auto bg-black rounded-t-lg h-52 md:w-full md:h-[30vw] md:rounded-none md:rounded-l-lg",src:t.thisPost.imageURL?t.thisPost.imageURL:t.defaultImgPath,alt:""},null,8,Lt),e("div",Dt,[e("div",At,[e("div",Rt,[e("img",{class:"w-11 h-11 rounded-full border border-black",src:t.defaultProfilePic,alt:"user photo"},null,8,Ot),e("div",Mt,[e("button",{onClick:s[7]||(s[7]=r=>c.toggleUserInfo(t.thisPost)),class:"font-semibold"},a(t.thisPost.user),1),t.showModal?(u(),h("div",St,[e("div",jt,[e("div",qt,[It,e("p",zt,a(t.author.username),1),Et,I(e("input",{class:"font-medium pr-1 pb-1 text-base w-50 bg-transparent pointer-events-none",type:"text","onUpdate:modelValue":s[8]||(s[8]=r=>t.author.email=r)},null,512),[[z,t.author.email]])]),e("button",{onClick:s[9]||(s[9]=r=>c.toggleUserInfo(t.thisPost)),class:"bg-red-500 p-2 text-white rounded"}," Close ")])])):p("",!0),e("p",Ft,a(t.calculateTimeElapsed(t.thisPost.created_at)),1)])]),e("span",Vt,a(t.thisPost.category),1)]),e("h5",Bt,a(t.thisPost.header),1),e("p",null,"Location: "+a(t.thisPost.location),1),e("p",null,"Date: "+a(t.thisPost.date),1),e("p",null,"Time: "+a(t.thisPost.time),1),e("div",Nt,[Kt,e("p",Qt,a(t.thisPost.more_info),1)]),e("div",Gt,[e("div",Ht,[e("button",{type:"button",onClick:s[10]||(s[10]=r=>c.displayPostDetails(t.thisPost)),class:"px-4 py-2 text-sm font-medium text-black bg-transparent border border-b border-red-500 rounded-l-md hover:bg-red-400 hover:text-white focus:z-10 focus:ring-2 focus:ring-red-500 focus:bg-red-500 focus:text-white"}," Close "),c.isCurrentUser(t.thisPost.user)?p("",!0):(u(),h("button",{key:0,onClick:s[11]||(s[11]=r=>t.messageThisUser(t.thisPost,t.currentUser)),type:"button",class:"px-4 py-2 text-sm font-medium text-black bg-transparent border border-b border-green-500 rounded-r-md hover:bg-green-400 hover:text-white focus:z-10 focus:ring-2 focus:ring-green-500 focus:bg-green-500 focus:text-white"}," Message ")),c.isCurrentUser(t.thisPost.user)?(u(),h("button",{key:1,type:"button",onClick:s[12]||(s[12]=r=>c.togglePostDropdown(t.thisPost)),class:"px-4 py-2 text-sm font-medium text-black bg-transparent border border-b border-green-500 rounded-r-md hover:bg-green-400 hover:text-white focus:z-10 focus:ring-2 focus:ring-green-500 focus:bg-green-500 focus:text-white"}," Options ")):p("",!0),t.thisPost.isOpen?(u(),h("div",Jt,[(u(!0),h(D,null,R(t.items,r=>(u(),h("button",{onClick:A=>c.executeAction(r.action,t.thisPost.post_id),class:"mx-1 hover:bg-green-500 rounded-lg px-2"},a(r.label),9,Wt))),256))])):p("",!0)])])])])])):p("",!0)])],64)}const es=X(xe,[["render",Xt]]);export{es as default};

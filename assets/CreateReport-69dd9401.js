import{_ as C,g as T,r as s,o as I,a as S,c as V,d as b,e as x,f as e,t as q,l as B,D as F,j as l,E as N,v as d,i as A,w as M,F as O,s as E,p as H,T as h,m as k,B as P,Q as j,q as Q,b as z,x as _}from"./index-0729dbfe.js";import{g as Y,r as G,u as J,a as K}from"./index.esm2017-654ca940.js";const W={setup(){return{}},data(){const m=T(),t=Y(),c=s(""),p=s(""),r=s(""),n=s(""),u=s(""),o=s(""),y=s(""),w=s(""),g=s("");I(async()=>{S(m,a=>{a&&v(a.uid)})});async function v(a){const i=E(h(k,"users"),H("uid","==",a));(await P(i)).forEach(f=>{const L=f.data().username;y.value=L})}async function R(a){if(a){const i=G(t,"postImages/"+a.name);return await J(i,a),await K(i)}else return""}async function D(a){j(h(k,"reports"),{category:c.value,date:r.value,header:p.value,location:n.value,more_info:u.value,time:o.value,user:this.username,created_at:Q.now(),imageURL:await a}).then(i=>{i.id}),g.value="Report published successfully",setTimeout(()=>{g.value="",z.push({path:"/posts"})},2e3)}return{createNewReport:D,uploadImage:R,imagePreview:null,isOpen:!1,newReportCategory:c,alertContent:g,newReportHeader:p,newReportDate:r,newReportLocation:n,newReportInfo:u,newReportTime:o,maxDate:new Date().toISOString().split("T")[0],imgPath:w,username:y,storage:t,img:null,currentDate:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),currentTime:new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",second:"numeric"})}},components:{},methods:{toggleAddImageBtn(){this.isOpen=!this.isOpen},selectImage(){this.$refs.fileInput.click()},async handleUploadImage(){const t=this.$refs.imgInput.files[0];return await this.uploadImage(t)},closeDiv(){this.$refs.animatedDiv.classList.add("animate-slide-out-left"),this.$refs.animatedDiv.classList.remove("animate-slide-in-left"),setTimeout(()=>{this.alertDetails.alertContent=null},500)}}},X={key:0,ref:"animatedDiv",class:"flex p-4 z-50 fixed top-1 w-80 text-sm items-center justify-between text-green-800 rounded-lg bg-green-50 transition-opacity duration-1000 ease-out animate-slide-in-left"},Z={class:"flex items-center"},$=e("span",{class:"material-symbols-outlined pr-2"}," check_circle ",-1),ee={class:"font-medium"},te={class:"bg-white dark:bg-gray-900"},re={class:"py-8 px-4 mx-auto max-w-2xl lg:py-16"},oe=e("h2",{class:"mb-4 text-xl font-bold text-gray-900 dark:text-white"}," Add a new report ",-1),ae=e("div",{class:"flex flex-row mb-7"},null,-1),se={class:"grid gap-4 sm:grid-cols-2 sm:gap-6"},ne=e("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",for:"user_avatar"},[_(" Upload a picture"),e("span",{class:"font-normal"},"(optional)")],-1),ie={class:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400","aria-describedby":"user_avatar_help",id:"user_avatar",ref:"imgInput",type:"file"},le=e("div",{class:"mt-1 text-sm text-gray-500 dark:text-gray-300",id:"user_avatar_help"},null,-1),de=e("label",{for:"category",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Category",-1),ce=e("option",{value:"",disabled:"",selected:""},"Select category",-1),ue=e("option",{value:"Lost"},"Lost",-1),me=e("option",{value:"Found"},"Found",-1),pe=[ce,ue,me],ge={class:"sm:col-span-2"},ye=e("label",{for:"title",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Report Title",-1),fe={class:"sm:col-span-2"},be=e("label",{for:"location",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Location",-1),xe={class:"w-full"},he=e("label",{for:"date",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Date",-1),ke=["max"],_e={class:"w-full"},we=e("label",{for:"time",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Time",-1),ve={class:"sm:col-span-2"},Re=e("label",{for:"description",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},[_("Description"),e("span",{class:"font-normal"},"(optional)")],-1),De={class:"flex flex-row"},Ue=e("button",{type:"submit",class:"inline-flex items-center mx-1 px-5 py-2.5 mt-4 sm:mt-6 text-sm font-medium text-center text-white bg-green-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-green-800"}," Publish report ",-1),Le=e("button",{class:"inline-flex items-center px-5 py-2.5 mt-4 sm:mt-6 text-sm border-green-700 border-2 font-medium text-center bg-white text-green-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-green-50"}," Cancel ",-1);function Ce(m,t,c,p,r,n){const u=V("RouterLink");return b(),x(O,null,[r.alertContent!=""?(b(),x("div",X,[e("div",Z,[$,e("span",ee,q(r.alertContent),1)]),e("button",{type:"button",id:"closeBtn",onClick:t[0]||(t[0]=(...o)=>n.closeDiv&&n.closeDiv(...o)),class:"text-xl font-bold"}," Ã— ")],512)):B("",!0),e("section",te,[e("div",re,[oe,e("form",{action:"#",onSubmit:t[7]||(t[7]=F(o=>r.createNewReport(n.handleUploadImage()),["prevent"]))},[ae,e("div",se,[e("div",null,[ne,e("input",ie,null,512),le]),e("div",null,[de,l(e("select",{id:"category",name:" optionlist ","onUpdate:modelValue":t[1]||(t[1]=o=>r.newReportCategory=o),required:"",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},pe,512),[[N,r.newReportCategory]])]),e("div",ge,[ye,l(e("input",{type:"text",name:"title",id:"title","onUpdate:modelValue":t[2]||(t[2]=o=>r.newReportHeader=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Type report title",required:""},null,512),[[d,r.newReportHeader]])]),e("div",fe,[be,l(e("input",{type:"text",name:"location",id:"location","onUpdate:modelValue":t[3]||(t[3]=o=>r.newReportLocation=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Type location",required:""},null,512),[[d,r.newReportLocation]])]),e("div",xe,[he,l(e("input",{type:"date",name:"date",id:"date",max:r.maxDate,"onUpdate:modelValue":t[4]||(t[4]=o=>r.newReportDate=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"",required:""},null,8,ke),[[d,r.newReportDate]])]),e("div",_e,[we,l(e("input",{type:"time","onUpdate:modelValue":t[5]||(t[5]=o=>r.newReportTime=o),name:"time",id:"time",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"",required:""},null,512),[[d,r.newReportTime]])]),e("div",ve,[Re,l(e("textarea",{id:"description",rows:"8","onUpdate:modelValue":t[6]||(t[6]=o=>r.newReportInfo=o),class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Your description here"},null,512),[[d,r.newReportInfo]])])]),e("div",De,[Ue,A(u,{to:"/posts",class:"flex flex-row mx-1"},{default:M(()=>[Le]),_:1})])],32)])])],64)}const Se=C(W,[["render",Ce]]);export{Se as default};

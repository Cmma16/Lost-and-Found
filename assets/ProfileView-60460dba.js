import{i as z,a as I,b as T,c as B,d as V,f as F,g as N,h as G,j as K,k as Y}from"./index-43a7aeec.js";import{_ as H,u as J,g as Q,r as w,o as W,s as M,p as L,T as R,B as j,A as k,K as E,G as X,b as Z,c as $,d as h,e as m,f as e,i as P,w as U,t as n,l as S,F as D,k as A,j as O,v as q,m as b,y as ee,n as te}from"./index-0729dbfe.js";const oe={props:{currentUserUID:{type:String,default:null}},setup(){return{store:J()}},data(){const u=Q(),s=w([]);let f=[];const y=w({}),t=w({}),_="./img/download.png",x="./img/foundIt icon.png",o="./img/profile.jpg";W(async()=>{await v(this.$store.state.user.uid);const a=M(R(b,"reports"),L("user","==",this.currentUser.username)),d=await j(a);for(const l of d.docs){const c={post_id:l.id,category:l.data().category,header:l.data().header,location:l.data().location,date:l.data().date,time:l.data().time,more_info:l.data().more_info,user:l.data().user,created_at:l.data().created_at,imageURL:l.data().imageURL,isOpen:!1,showFullDescription:!1};f.push(c)}s.value=f,z(),I(),T(),B(),V(),F(),N(),G(),K(),Y()});async function v(a){const d=M(R(b,"users"),L("uid","==",a));(await j(d)).forEach(c=>{const r={username:c.data().username,email:c.data().email};y.value=r;const i={userDocUID:c.id,username:c.data().username,email:c.data().email,password:c.data.password};t.value=i})}async function p(){ee(u.currentUser,t.email).then(()=>{console.log("Email Updated")});const a=k(b,"users",t.value.userDocUID);await E(a,{email:t.value.email,username:t.value.username})}function C(a){const d={year:"numeric",month:"long",day:"numeric"},l=a.toDate().toLocaleString("en-US",d);var r=new Date-a.toDate();r=r/1e3;var i=" second(s) ago",g=Math.floor(r);return r>60&&r<3600?(g=Math.floor(r/60),Math.floor(r/60)>1?i=" mins ago":i=" min ago"):r>3600&&r<86400?(g=Math.floor(r/3600),Math.floor(r/3600)>1?i=" hrs ago":i=" hr ago"):r>86400&&r<604800?(g=Math.floor(r/86400),Math.floor(r/86400)>1?i=" days ago":i=" day ago"):r>604800?(g=l,i=""):(g=Math.floor(r),i="s ago"),g+i}return{getCurrentUser:v,updateProfile:p,currentUser:y,userProfile:t,defaultImgPath:_,logoPath:x,defaultProfilePic:o,myPosts:s,calculateTimeElapsed:C,items:[{label:"Resolve",action:async a=>{s.value=s.value.filter(l=>l.post_id!==a);const d=k(b,"reports",a);await E(d,{category:"Resolved"})}},{label:"Delete",action:async a=>{s.value=s.value.filter(d=>d.post_id!==a),await X(k(b,"reports",a))}},{label:"Modify",action:a=>{this.store.dispatch("updateData",a),Z.push({name:"postEdit"})}}]}},methods:{toggleDropdown(u){const s=this.myPosts.indexOf(u),f=this.myPosts[s].isOpen;this.myPosts[s].isOpen=!f},executeAction(u,s){this.isOpen=!1,u(s)}}},se={class:"fixed top-0 z-50 py-2 w-full bg-[#003300] border-b border-gray-200 dark:bg-[#003300] dark:border-gray-700"},re={class:"px-3 py-1 lg:px-5 lg:pl-3"},ae={class:"flex items-center justify-between"},le={class:"flex items-center justify-start"},ne=e("button",{"data-drawer-target":"logo-sidebar","data-drawer-toggle":"logo-sidebar","aria-controls":"logo-sidebar",type:"button",class:"material-symbols-outlined inline-flex items-center p-2 text-white rounded-lg sm:hidden hover:bg-white hover:text-[#003300] focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"}," menu ",-1),ie=["src"],de=e("span",{class:"self-center text-xl text-white font-semibold sm:text-2xl whitespace-nowrap dark:text-white"},"FoundIt!",-1),ce={class:"flex items-center"},ue={class:"flex items-center ml-3"},he={type:"button",class:"flex text-sm rounded-full","aria-expanded":"false","data-dropdown-toggle":"dropdown-user"},me=e("span",{class:"sr-only"},"Open user menu",-1),ge=["src"],fe={class:"text-center hidden md:block text-white px-2 text-xl"},xe={class:"z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded shadow dark:bg-gray-700 dark:divide-gray-600",id:"dropdown-user"},pe={class:"px-4 py-3",role:"none"},be={class:"text-sm text-gray-900 md:hidden dark:text-white",role:"none"},_e={class:"text-sm font-medium text-gray-900 truncate dark:text-gray-300",role:"none"},ye={class:"py-1",role:"none"},ve=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white",role:"menuitem"},"Reports",-1),we=e("li",null,[e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white",role:"menuitem"},"Messages")],-1),ke={class:"flex flex-col md:flex-row justify-center pt-20 w-auto h-auto md:h-[100vh]"},Pe={class:"h-fit md:h-modal mx-0 md:mx-2 w-full md:w-72"},Ue={class:"flex py-2 rounded-none md:rounded-3xl gap-1 shadow-xl flex-row md:flex-col justify-center items-center bg-white h-[100%]"},De=["src"],Ce={class:"flex flex-col items-center mx-10"},Me={class:"text-xl font-bold text-center"},Le=e("div",{class:"inline-flex rounded-md shadow-sm",role:"group"},[e("button",{type:"button","data-modal-target":"authentication-modal","data-modal-toggle":"authentication-modal",class:"px-4 py-2 text-xs font-medium text-gray-900 bg-white border border-gray-200 rounded-l-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white"}," Edit Profile "),e("button",{type:"button",class:"px-4 py-2 text-xs font-medium text-gray-900 bg-white border border-gray-200 rounded-r-md hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white"}," Change Password ")],-1),Re=e("button",{class:"rounded-full px-5 bg-[#00A651] h-10 m-3 active:scale-[0.9]"}," Create New Report ",-1),je={class:"w-full md:w-[40rem] rounded-none md:rounded-3xl bg-white h-[100vh] md:h-modal mx-0 md:mx-2"},Ee=e("h1",{class:"py-2 text-xl font-bold pl-4 shadow-md"},"My Reports",-1),Se={class:"h-[85%] px-2"},Ae={class:"flex flex-col items-center p-4 rounded-lg h-full overflow-y-auto"},Oe={key:0,class:"font-medium text-xl"},qe={class:"flex justify-between px-4 pt-4"},ze={class:"font-bold text-lg"},Ie={class:"flex rounded-full border-[1px] hover:bg-[#4DEC9A] justify-center relative"},Te=["onClick"],Be={class:"material-symbols-outlined active:rotate-90 transition-all"},Ve={key:0,class:"flex bg-gray-300 flex-col top-[1.8rem] rounded-lg absolute"},Fe=["onClick"],Ne={class:"flex flex-col items-center bg-white border-gray-200 rounded-lg"},Ge=["src"],Ke={class:"flex flex-col p-4 w-full leading-normal"},Ye={class:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"},He={class:"border-2 border-green-600 w-200 py-1 rounded mt-2"},Je=e("h1",{class:"font-bold m-2"},"Additional information:",-1),Qe={class:"m-2"},We={class:"flex flex-col justify-between mt-2"},Xe={class:"flex"},Ze={class:"text-gray-600 text-sm font-normal"},$e={id:"authentication-modal",tabindex:"-1","aria-hidden":"true",class:"fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full"},et={class:"relative w-full max-w-md max-h-full"},tt={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},ot=e("button",{type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white","data-modal-hide":"authentication-modal"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})]),e("span",{class:"sr-only"},"Close modal")],-1),st={class:"px-6 py-6 lg:px-8"},rt=e("h3",{class:"mb-4 text-xl font-medium text-gray-900 dark:text-white"}," Update your user profile ",-1),at={class:"space-y-6",action:"#"},lt=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Your email",-1),nt=e("label",{for:"username",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Your username",-1);function it(u,s,f,y,t,_){const x=$("RouterLink");return h(),m(D,null,[e("nav",se,[e("div",re,[e("div",ae,[e("div",le,[ne,P(x,{to:{path:"/"},class:"flex ml-2 md:mr-24"},{default:U(()=>[e("img",{src:t.logoPath,class:"h-8 mr-3",alt:"FoundIt! Logo"},null,8,ie),de]),_:1})]),e("div",ce,[e("div",ue,[e("div",null,[e("button",he,[me,e("img",{class:"w-8 h-8 rounded-full",src:t.defaultProfilePic,alt:"user photo"},null,8,ge),e("span",fe,n(t.currentUser.username),1)])]),e("div",xe,[e("div",pe,[e("p",be,n(t.currentUser.username),1),e("p",_e,n(t.currentUser.email),1)]),e("ul",ye,[e("li",null,[P(x,{to:{path:"/posts"}},{default:U(()=>[ve]),_:1})]),we,e("li",null,[e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white",role:"menuitem",onClick:s[0]||(s[0]=o=>u.$store.dispatch("logout"))},"Sign out")])])])])])])])]),e("section",ke,[e("div",Pe,[e("header",Ue,[e("img",{src:t.defaultProfilePic,alt:"profile_pic",class:"border-2 aspect-square rounded-full h-36 md:h-[30%] w-fit"},null,8,De),e("div",Ce,[e("h1",Me,n(t.currentUser.username),1),e("h2",null,n(t.currentUser.email),1),Le,P(x,{to:"/create-report",class:"flex flex-col"},{default:U(()=>[Re]),_:1})])])]),e("div",je,[Ee,e("div",Se,[e("div",Ae,[t.myPosts.length==0?(h(),m("p",Oe," No reports yet ")):S("",!0),(h(!0),m(D,null,A(t.myPosts,(o,v)=>(h(),m("div",{key:o.post_id,class:"bg-white border w-auto min-w-[444px] my-1 max-w-lg border-gray-200 rounded-lg"},[e("div",qe,[e("p",ze,n(o.category),1),e("div",Ie,[e("button",{class:te(["rounded-full px-[1.5px] flex justify-items-center hover:bg-green-500 transition-all duration-500 ease-in-out",{"bg-green-500":o.isOpen}]),onClick:p=>_.toggleDropdown(o)},[e("span",Be,n(o.isOpen?"close":"more_horiz"),1)],10,Te),o.isOpen?(h(),m("div",Ve,[(h(!0),m(D,null,A(t.items,p=>(h(),m("button",{onClick:C=>_.executeAction(p.action,o.post_id),class:"mx-1 hover:bg-green-500 rounded-lg px-2"},n(p.label),9,Fe))),256))])):S("",!0)])]),e("div",Ne,[e("img",{class:"object-scale-down w-full rounded-t-lg h-52",src:o.imageURL?o.imageURL:t.defaultImgPath},null,8,Ge),e("div",Ke,[e("h5",Ye,n(o.header),1),e("p",null,"Location: "+n(o.location),1),e("p",null,"Date: "+n(o.date),1),e("p",null,"Time: "+n(o.time),1),e("div",He,[Je,e("p",Qe,n(o.more_info),1)]),e("div",We,[e("div",Xe,[e("span",null,n(o.user),1)]),e("p",Ze,n(t.calculateTimeElapsed(o.created_at)),1)])])])]))),128))])])])]),e("div",$e,[e("div",et,[e("div",tt,[ot,e("div",st,[rt,e("form",at,[e("div",null,[lt,O(e("input",{type:"email",name:"email",id:"email","onUpdate:modelValue":s[1]||(s[1]=o=>t.userProfile.email=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",required:""},null,512),[[q,t.userProfile.email]])]),e("div",null,[nt,O(e("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":s[2]||(s[2]=o=>t.userProfile.username=o),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",required:""},null,512),[[q,t.userProfile.username]])]),e("button",{type:"button","data-modal-hide":"authentication-modal",onClick:s[3]||(s[3]=(...o)=>t.updateProfile&&t.updateProfile(...o)),class:"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Update profile ")])])])])])],64)}const ut=H(oe,[["render",it]]);export{ut as default};
